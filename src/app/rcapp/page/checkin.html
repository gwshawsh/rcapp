<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">

		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../css/mui.min.css" rel="stylesheet" />
		<link href="../css/style.css" rel="stylesheet" />
		<style type="text/css">
			body,
			html {
				width: 100%;
				height: 100%;
				overflow: hidden;
				margin: 0;
			}
			
			#allmap {
				width: 100%;
				height: 40%;
				overflow: hidden;
				margin: 0;
			}
		</style>
	</head>

	<body>
		<div id="rrapp">
			<rc-header title="考勤签到" btn="考勤统计" to="checkin_statis.html"></rc-header>
			<div class="mui-content mui-content-padded ">
				<div>
					<h2 style="font-weight: 500; padding-left: 32px;">签到<span class="font-secondary position-right">今日未签到</span></h2>
					<img src="../images/calendar.png" style="height: 24px;padding-left: 32px;"><span class="font-green">2016-06-26</span>

				</div>

				<p>当前位置</p>

			</div>
		</div>
		<div id="allmap">

		</div>
		<div id="rrapp2">
			{{address}}
		</div>
		
		<script src="../js/mui.min.js"></script>
		<script src="../js/vue.min.js"></script>
		<script src="../js/app.js"></script>
		<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=GmBZ3YIRxMLsVXjG4MzoWmux9yUhdF2Z"></script>

		<!--<script type="text/javascript" src="http://developer.baidu.com/map/jsdemo/demo/convertor.js"></script>-->

		<script type="text/javascript">
			new Vue({
				el: '#rrapp',
				data: {

				},
			});
			new Vue({
				el: '#rrapp2',
				data: {
					address:'',
				},
			});
			mui.init();
			initMap();
			mui.plusReady(function() {
				plus.geolocation.getCurrentPosition(translatePoint, function(e) {
					mui.toast("异常:" + e.message);
				});
			});

			function translatePoint(position) {
				var currentLon = position.coords.longitude;
				var currentLat = position.coords.latitude;
				var gpsPoint = new BMap.Point(currentLon, currentLat);
				BMap.Convertor.translate(gpsPoint, 2, initMap); //坐标转换
			}

			function initMap() {

				var map = new BMap.Map("allmap"); // 创建Map实例
				var point = new BMap.Point(116.404, 39.915);
				map.centerAndZoom(point, 11); // 初始化地图,设置中心点坐标和地图级别
				map.addControl(new BMap.OverviewMapControl());
				map.setCurrentCity("北京"); // 设置地图显示的城市 此项是必须设置的
				map.enableScrollWheelZoom(true); //开启鼠标滚轮缩放
				map.enableDragging();
				map.centerAndZoom(point, 15);
				//var myIcon = new BMap.Icon("../images/position.png", new BMap.Size(70,50));
				var marker = new BMap.Marker(point); // 创建标注    


				map.addOverlay(marker); // 将标注添加到地图中
				marker.enableDragging();
				map.addEventListener('dragend', function() {
					marker.setPosition(map.getCenter());
				});
				marker.setAnimation(BMAP_ANIMATION_BOUNCE);
			}
		</script>
	</body>

</html>