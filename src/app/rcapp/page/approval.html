<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />

		<link href="../css/mui.min.css" rel="stylesheet" />
		<link href="../css/style.css" rel="stylesheet" />
		<link href="../css/rclist.css" rel="stylesheet" />
		<style>
			.mui-badge {
				position: absolute;
				color: #fff; 
				background: red;
				top: 0.3rem;
				right: 0.7rem;
				float: right;
			}
			
			.mui-control-item {
				position: relative;
			}
			
			.mui-control-content {
				background-color: white;
				min-height: 400px;
			}
			
			.mui-control-content .mui-loading {
				margin-top: 50px;
			}
		</style>
	</head>

	<body>
		<div id="rrapp">
			<rc-header :title="getbillname(type)+'审批'" btn="新增" to="approval_new.html" :value="type"></rc-header>
			<div class="mui-content">

				<div class="mui-input-row mui-search">
					<input type="search" class="mui-input-clear" placeholder="请输入单号" @input="search" v-model="billno">
				</div>
				<rc-list :list=list> </rc-list>

			</div>
		</div>
		<script src="../js/mui.min.js"></script>
		<script src="../js/vue.min.js"></script>
		<script src="../js/app.js"></script>
		<script src="../js/rclist.js"></script>
		<script src="../js/app.js"></script>
		<script src="../js/lodash.js"></script>
		<script type="text/javascript">
			var askbill = new Vue({
				el: '#rrapp',
				data: {
					type:"",
					billno: '',
					list: [],
					sources: [],

				},
				methods: {
					getdata: function(back) {
						var param = {
							billtype: this.type,
							billno:this.billno,
	
						};  
						

						query("/todolist/listdoto",
							param,
							function(data) {
								askbill.list = data.page.list;

							},false,back);
						//						 
					},
					
					search: _.debounce(function() {
						askbill.getdata(true);  
					}, 500),
				}
			}
			);
			mui.init({
				swipeBack: false
			});

			mui.plusReady(function() {
				var self = plus.webview.currentWebview();
				askbill.type = self.value;
				askbill.getdata();
			});
		</script>
	</body>

</html>